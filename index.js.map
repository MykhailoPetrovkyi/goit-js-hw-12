{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '48249953-c87d0f666d29b70f04b79c154';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nimport axios from 'axios';\n\nexport const fetchImages = (searchQuery, currentPage, perPage) => {\n  const axiosParams = {\n    params: {\n      key: API_KEY,\n      q: searchQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page: currentPage,\n      per_page: perPage,\n    },\n  };\n  return axios.get(BASE_URL, axiosParams);\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\nconst gallery = document.querySelector('.gallery');\n\nexport const renderImages = images => {\n  const image = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-card\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n          </a>\n          <ul class=\"gallery-info\">\n            <li class=\"gallery-info-content\">\n              <p>Likes</p>\n              <p>${likes}</p>\n            </li>\n            <li class=\"gallery-info-content\">\n              <p>Views</p>\n              <p>${views}</p>\n            </li>\n            <li class=\"gallery-info-content\">\n              <p>Comments</p>\n              <p>${comments}</p>\n            </li>\n            <li class=\"gallery-info-content\">\n              <p>Downloads</p>\n              <p>${downloads}</p>\n            </li>\n          </ul>\n        </li>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', image);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery-link', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n};\n\nexport const clearImages = () => {\n  gallery.innerHTML = '';\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImages } from './js/pixabay-api';\nimport { renderImages, clearImages } from './js/render-functions';\n\nconst form = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.load-more-btn');\nconst input = form.elements.search;\n\nlet searchQuery = '';\n\nlet page = 1;\nconst perPage = 15;\n\nconst render = async e => {\n  try {\n    e.preventDefault();\n    searchQuery = input.value.trim();\n    loaderCheck(false);\n    loadMore.classList.add('is-hidden');\n\n    if (searchQuery === '') {\n      iziToast.error({\n        title: 'Error',\n        message: `❌ Sorry, there are no images matching your search query. Please try again!`,\n        position: 'topRight',\n      });\n      return;\n    }\n\n    page = 1;\n    clearImages();\n\n    const { data } = await fetchImages(searchQuery, page, perPage);\n    console.log(data);\n    if (data.hits.length === 0) {\n      input.value = '';\n      iziToast.error({\n        title: 'Error',\n        message: `❌ Sorry, there are no images matching your search query. Please enter the correct values!`,\n        position: 'topRight',\n      });\n      clearImages();\n      return;\n    }\n\n    renderImages(data.hits);\n    loadMore.classList.remove('is-hidden');\n  } catch (err) {\n    console.log(err);\n  } finally {\n    loaderCheck(true);\n  }\n};\n\nform.addEventListener('submit', render);\n\nconst renderMore = async () => {\n  try {\n    page++;\n    loaderCheck(false);\n    const { data } = await fetchImages(searchQuery, page, perPage);\n    renderImages(data.hits);\n\n    const { height: cardHeight } = document\n      .querySelector('.gallery')\n      .firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n      top: cardHeight * 3,\n      behavior: 'smooth',\n    });\n\n    if (page * perPage >= data.totalHits) {\n      loadMore.classList.add('is-hidden');\n      loadMore.removeEventListener('click', renderMore);\n      iziToast.info({\n        title: 'Info',\n        message: `✅ You've reached the end of search results.`,\n        position: 'topRight',\n      });\n    }\n  } catch (err) {\n    console.log(err);\n  } finally {\n    loaderCheck(true);\n  }\n};\nloadMore.addEventListener('click', renderMore);\n\nconst loaderCheck = load =>\n  (loader.style.display = load ? 'none' : 'inline-block');\n"],"names":["API_KEY","BASE_URL","fetchImages","searchQuery","currentPage","perPage","axiosParams","axios","lightbox","gallery","renderImages","images","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearImages","form","loader","loadMore","input","page","render","e","loaderCheck","iziToast","data","err","renderMore","cardHeight","load"],"mappings":"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"}